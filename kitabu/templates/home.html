{% extends "layout.html" %}

{% block content %} 
    <div class="container">
        <div class="jumbotron bg-white text-white text-center pt-4 mb-0">
            <div class="m-auto">
                <img src="{{ url_for('static', filename = 'images/_book.png') }}" width="100" height="85">
                <h1 class="mb-4 mr-4 display-4">Kitabu Review</h1> 
            </div>
            <hr>    
            <p>This is a book review website. Register, then search for books, leave reviews, and see the reviews made by other people.</p>
            {% if current_user.is_authenticated %}
            <div class="input-group mt-4">
                <form class="form-inline mx-auto" action="" method="POST">
                    {{ form.hidden_tag() }}
                    {% if form.search.errors %}
                    {{ form.search(class="form-control form-control is-invalid") }}
                    {{ form.submit(class="btn btn-secondary") }}
                        <div class="invalid-feeback">
                            {% for error in form.search.errors%}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.search(class="form-control form-control", placeholder='Title/ Author / ISBN') }}    
                        {{ form.submit(class="btn btn-secondary") }}
                    {% endif %}
                </form>
            </div>
        {% endif %}
        </div>
        <div class='container h-25 p-3'> 
            <div class="row">
                {% for book in books %}
                    <div class="card-deck col-sm-4 mx-auto mb-4">
                        <div class="card bg-light shadow">
                            <div class="card-body">
                                <h4 class="card-title text-info">{{book.title}}</h4>
                                <p class="card-text text-info">by {{book.author}}, {{book.year}}</p>
                                <a href="{{ url_for('book', book_id=book.id) }}" class="btn btn-danger">See more</a>  
                            </div>
                        </div>   
                    </div>
                {% endfor %}
            </div>   
        </div>  
    </div>
{% endblock content %}